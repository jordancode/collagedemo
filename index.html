<html>

<head>
    <script type="text/javascript">
        const IMAGES = [
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEVrVoqGm1gKss5rk-w6ysPHGVvhht1i-WVVnYT0_XZIRUaHTeiNLhe3N4EdOQ9xX20f9fbzVpZ-7Gw2ETJrhEQv-xjC2F8u4Lq-wbiRCnuVllISzT2wau2beyOdpkZXBDrGXZ5Es4Q1o_1uCLJ3SV7oAA=w2340-h1562-no',
                top: 200,
                left: 20,
                height: 332,
                avatarId: 0,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEXzzqtai4Vz3fZqm0-5Th7afMKQVlcDr3Xs0ixmEHbqSAtEHkqvy4NL19SP72w1x5ZYqd0Om1yQMXYVmHY63SZdKQ50PJD85Dv6lxf1IoF2ZlUDDPl-rSQCI4y-nCIkgDWNwArvrLrK_P3ygH6Q1Q4kng=w1172-h1758-no',
                top: 50,
                left: 600,
                width: 332,
                avatarId: 1,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEWrkjcRGNMhr1l3ZE1TPTVjHaAJnXTmrpZBNE1-k30cGULXjSdh4JNiIeXJNLWtNCGChs3vVPnuuHHmvDlGqL9pFNDxdSrfPznKIKv4dHCkfEBUgr6ipe59tyiXQnkGmoNT9cnorVSSSdrMkr1FbftGeQ=w1116-h1758-no',
                top: 80,
                left: 1000,
                width: 466,
                height: 750,
                avatarId: 2,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEVoEywadSq4vrdBDFAZKNQU1y_H0kF0Kgl9AwNBs5TXZoTHnV9ZqVr6jq9gN4RDR25E8VQOIEV1t3SJcHpjwZiHmMZtiYXjuq27Ay7n-U2_jdGUeubNr0UnEh7Z_bWfZZzpGAJIMCVZxAjWG2MGPv2Zsg=w1172-h1758-no',
                top: 30,
                left: 1590,
                width: 332,
                avatarId: 0,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEVOZyIFLDBDl4njt7eoBOnywMRr6MXQ0myjiHQktrKAfaN9XIJGdIPM2ZaF-7kcTvgfIcVxu2BO3wdwVCP3mjqrUpdvKETU36RA2Cw7AKJ6lA0BZpPXrpvyNBHWOqLKDxUwJY_3NYENORqKEY23Ppj0tQ=w2232-h1490-no',
                top: 700,
                left: 400,
                height: 332,
                avatarId: 1,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEXBiZf812RS-xrmBT8CP1k0CHxNYx3eBd8JmYaMj9qBV8DaVQErOuGSxJJ5gf7eOtHoaAVYakWB24Q8CSmPbxa73F2wZMA613B0GiNFVFBFrMp18DKX7o6mY4uU5I9TvxfJhVFfZBPVK1NOyaDg7gvkWA=w2232-h1488-no',
                top: 1000,
                left: 1000,
                height: 332,
                avatarId: 2,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEU7MiuKcqoJ_QIuYbqrMGCHDKlCxegUSDImmbb_zacZoLRx6CUFL1KKxmwqPhWbi-IiYtmttlaxPAkEgB6Lew-bVn4-RNXP9IHUV-V_TMa4y-TbHWRD6W02qBOR6NVY1Z1rjkfVpCJ_gLcKmFASGg4llw=w2232-h1490-no',
                top: 800,
                left: 1700,
                height: 332,
                avatarId: 0,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEWLmqXHMTBmPE5Y16_jm-E5FGS_-VHKhuaaCKMeq7ybPnHEnMKa3rcWryZli7XdUXx7xikFWSrEQ51yrFFNznUVXrHVE4n2Nv6nfK3TzVub4xO64t3T5Hl3GfvX5_juUm7lZUtEODTzTz87Ij3F_rMS0A=w2232-h1478-no',
                top: 220,
                left: 2000,
                height: 466,
                width: 750,
                avatarId: 1,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEVQiFs8BQUkdYzoQs6F4ZGf8iKjhzfcQ3Unsr2vxGRubeYaWnxGwnVDBJPF9cShBsJAsHIbzuQ-hdbQz5nE9M672XcfqPPRffxhkFT-FsQcIH92Hi_-sMGZ7z128LWV8Z2AJGJ5zRLurYMehyFkGAz5AQ=w1172-h1758-no',
                top: 1160,
                left: 40,
                width: 466,
                height: 700,
                avatarId: 2,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEX90vCvQ6xVepcFRIMuSWpOVaCA1i1v_QSpradO6VUKG-UtQUXO6mGBbLYcf2xJAJ2FcGBe5BdF2w7QtswTWWRlcuxvdjQk_Ee1DrGkqT3eXhs4IA0CbVftw2r7JFsR0rSk5iicq6tBVKzDf1GYi9IlWQ=w1174-h1758-no',
                top: 1200,
                left: 600,
                width: 332,
                avatarId: 0,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEXzU2tD5OKFKCqo5cn-oOY6N49AdvAwC_2mA6ZudYLIK2iE2ZSSasuLGIKLtwNvOhZJfJeNYtay56Y5W0qXjk8tdQP-Ki38xpg2kNyWHJPR8x80zNRqEuhNW9RZ3a37bkJZ7Rcwy_PfaAvTntGa9xlvcA=w2232-h1536-no',
                top: 1500,
                left: 1200,
                width: 700,
                height: 466,
                avatarId: 1,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEXcYniFySVkSfxj073Ed0pGNRMs0ooaKFpyJ-mJ-gSnwEelY5S-l7dJesdf7eAycehGEL-4rF9OY-kse-W2JBQ4Z8uQODG_SRcq35YeMpgDd9W99gNK4zzY_gug_-A-Vrae_0fmM3Hl1O9e9JDrzGLQeA=w2232-h1488-no',
                top: 1300,
                left: 2040,
                height: 332,
                avatarId: 2,
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEVeCZzIefXk9AiGH26Lr9ZQ2Hph9begFTItDI7Kn6UE6tIrjh-oWejDyfgtvTWuFYBdLITEec4zK_iabFAaozx7YOX0FQHMkeFAXHdgoAtU8bcETgyfynk1bahbjhF5g0OimMR6kAx_STOd17UjJ9rs4A=w1172-h1758-no',
                top: 1850,
                left: 750,
                width: 332,
                avatarId: 0,
            },
        ];

        const STICKERS = [

        ];

        const AVATARS = [
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEU2RTi-gEXzvRkVa3Xsw_RAS5QG-FR7_yDP28VFaIUyl7R4NLhwRz1zIOWtVwE0jaHJ90C6Yus2xl0nSJ-OlwBNNL9K022MJSlkzNAY-y-02jyVNf34-eHSAkhG-F11UpN1MRla0TDRyOWwIkZXw9boiA=s64-no',
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEVSqfVqbs4EoZpeZC3Y-L56VXSdmfZ5o-baS6CM_gXh0UWhd3nbmbfHYyyxW94ugBqqkTARXo0HLcAtC5K3dD_gz3gc2DwcnjBalZpN1KhWUhgSh6chBqpk-kJOeF0WowRYWsyv0tlZX6Atd6brBxE2rA=s64-no',
            },
            {
                url: 'https://lh3.googleusercontent.com/pw/AL9nZEV70dTF212LSQz4LF-iXz2qQ3WHUUaG9AwDVyYyjVSUfk2E9g9DlOa7UibddDxYNU3MplEJqT9DwHk8ZLBCN-qz8GqQwNjsbuErbB3wxSzaOdZdV_kvD50zSJOxcOgd2sZ115LLLL9kdUS04ecwBNT9zQ=s64-no',
            },
        ];

        let lastVelocityX = 0;
        let lastScreenX = window.pageXOffset;
        let handle = null;

        const measureAcceleration = () => {
            const currentX = window.pageXOffset;
            const currentVelocityX = currentX - lastScreenX;

            if (Math.abs(currentVelocityX - lastVelocityX) > 5) {
                startSwing();
            }

            lastVelocityX = currentVelocityX;
            lastScreenX = currentX;
            window.requestAnimationFrame(measureAcceleration);
        };

        const startSwing = () => {
            if (handle != null) {
                clearTimeout(handle);
            }
            const polaroids = document.getElementsByClassName('polaroid');
            [...polaroids].forEach(p => {
                p.classList.add('swinging-light');
            });

            handle = setTimeout(
                stopSwing, 1500);
        };
        const stopSwing = () => {
            handle = null;
            const polaroids = document.getElementsByClassName('polaroid');
            [...polaroids].forEach(p => {
                p.classList.remove('swinging-light');
            });
        };

        measureAcceleration();

    </script>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            background-color: #FFFFCC;
        }

        #canvas {
            min-width: 100%;
            min-height: 100%;
            padding: 50px;
            margin: 50px;
        }

        .polaroid {
            text-align: center;
            position: absolute;
            align-content: center;
            padding: 20px;
            padding-bottom: 60px;
            border-radius: 12px;
            box-shadow: 16px 16px 4px rgba(0, 0, 0, .2);
        }

        @keyframes swinging-light {
            0% {
                transform: rotate(0deg);
            }

            25% {
                transform: rotate(-0.8deg);
            }

            75% {
                transform: rotate(0.4deg);
            }

            100% {
                transform: rotate(0deg);
            }
        }

        .swinging-light {
            -webkit-transform-origin: 50% 0;
            transform-origin: 50% 0;
            -webkit-animation: swinging-light 1.3s ease-in-out forwards;
            animation: swinging-light 1.3s ease-in-out forwards;
        }
    </style>
</head>

<body>
    <div id="canvas">
    </div>

    <script type="text/javascript">
        const canvas = document.getElementById("canvas");

        const genAvatar = (avatarData) => {
            const el = document.createElement("div");
            el.style.backgroundImage = `url('${avatarData.url}'`;
            el.style.display = 'inline-block';
            el.style.position = 'absolute';
            el.style.marginTop = -52;
            el.style.marginLeft = -32;
            el.style.height = 64;
            el.style.width = 64;

            return el;
        };

        const genPolaroid = (imgData) => {
            const avatar = genAvatar(AVATARS[imgData.avatarId]);
            const img = genImage(imgData);

            const el = document.createElement("div");
            el.classList.add('polaroid');

            el.style.top = imgData.top + "px";
            el.style.left = imgData.left + "px";


            el.style.width = (imgData.width ?? 500) + "px";
            el.style.height = (imgData.height ?? 500) + "px";

            const r = 204 + Math.round(51 * Math.random());
            const g = 204 + Math.round(51 * Math.random());
            const b = 204 + Math.round(51 * Math.random());
            const borderColor = `rgb(${r},${g},${b})`;
            el.style.backgroundColor = borderColor;

            el.appendChild(avatar);
            el.appendChild(img);

            return el;
        }

        const genImage = (imgData) => {
            const imgEl = document.createElement("div");
            imgEl.style.backgroundImage = `url('${imgData.url}')`;

            imgEl.style.width = '100%';
            imgEl.style.height = '100%';
            imgEl.style.backgroundSize = 'cover';
            imgEl.style.backgroundRepeat = 'no-repeat';
            imgEl.style.borderRadius = '4px';

            return imgEl;
        };

        IMAGES.forEach(imgData => {
            const el = genPolaroid(imgData);

            canvas.appendChild(el);
        });

        console.log('images created');
    </script>
</body>

</html>
